# Провайдер Быстрых Исправлений (`QuickfixImportProvider`)

Этот класс отвечает за появление "лампочки" (Quick Fix) в VS Code, которая предлагает импортировать отсутствующие компоненты, директивы или пайпы, когда Angular Language Service или другой линтер обнаруживает ошибку в HTML-шаблоне.

## Принцип работы

`QuickfixImportProvider` реализует стандартный интерфейс VS Code `CodeActionProvider`.

1.  **Активация**: VS Code вызывает метод `provideCodeActions` этого класса, когда курсор пользователя оказывается на строке, для которой есть диагностическая ошибка (например, волнистое подчеркивание).
2.  **Фильтрация ошибок**: Провайдер сначала проверяет, относится ли ошибка к тем, которые он умеет исправлять. Список кодов ошибок (например, `NG8001: 'my-component' is not a known element.`) и ключевых фраз хранится в `fixesDiagnosticCode`.
3.  **Извлечение термина для поиска**: Если ошибка релевантна, провайдер пытается извлечь из ее текста или из самого подчеркнутого кода ключевой терм для поиска. Например, из ошибки `'my-component' is not a known element` он извлечет `my-component`.
4.  **Запрос к `AngularIndexer`**:
    -   С извлеченным термином (например, `my-component` или `bigRows`) он обращается к сервису `AngularIndexer`.
    -   Он использует утилиту `getAngularElement`, которая пробует найти терм в индексе. Эта утилита также генерирует простые варианты (например, для `bigRows` она попробует найти `bigRows` и `[bigRows]`).
5.  **Создание действия (`CodeAction`)**:
    -   Если `AngularIndexer` успешно находит соответствующий элемент в своем индексе, `QuickfixImportProvider` создает объект `vscode.CodeAction`.
    -   Это действие содержит заголовок (например, `Import TestComponent from ./test.component.ts`) и команду (`angular-auto-import.importElement`).
    -   В команду передается найденный селектор в качестве аргумента.
6.  **Возврат действий**: VS Code получает список таких действий и отображает их пользователю в виде выпадающего меню у "лампочки". При выборе одного из них выполняется соответствующая команда.

## Важный аспект логики

-   **Провайдер не парсит HTML**. Он не анализирует структуру документа вокруг ошибки. Его работа гораздо проще: он доверяет диагностике от Angular Language Service и работает исключительно с текстом ошибки и небольшим фрагментом кода, который эта ошибка подсвечивает.
-   **Успех зависит от `AngularIndexer`**: Эффективность этого провайдера напрямую зависит от того, насколько хорошо `AngularIndexer` и утилита `parseAngularSelector` разобрали и проиндексировали исходный селектор директивы. Если `parseAngularSelector` успешно извлек `bigRows` из `table[jupiter-table][bigRows]`, то `QuickfixProvider` сможет его найти. 